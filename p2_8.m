% 14/6

dur = 4;                                            % seconds

fsP = 44100; nP = dur*fsP; tP = (0:nP-1)/fsP;       % for piano
fsG = 22050; nG = dur*fsG; tG = (0:nG-1)/fsG;       % for guitar

fP = 440; fG = 440;                                 % base frequencies

piano =[0.35578, 0.05081e-03;
        0.06525, 0.06723e-03;
        0.02664, 0.10755e-03;
        0.00870, 0.08566e-03;
        0.04392, 0.06843e-03;
        0.03026, 0.06489e-03;
        0.00420, 0.07020e-03;
        0.00226, 0.01801e-03;
        0.00200, 0.04481e-03;
        0.00473, 0.04356e-03];
piano(:,2) = piano(:,2)*20000;

guitar =[0.14836, 0.03109e-03;
         0.51531, 0.29010e-03;
         0.07154, 0.02759e-03;
         0.00928, 0.02834e-03;
         0.00101, 0.01352e-03;
         0.00219, 0.10835e-03;
         0.01291, 0.22861e-03;
         0.01744, 0.19850e-03;
         0.00795, 0.20998e-03;
         0.00572, 0.21626e-03;];
guitar(:,2) = guitar(:,2)*20000;


% xP = sum( piano(:,1).*exp(-piano(:,2)*tP) .* sin(2*pi*[1:10]'*fP*tP) );
% sound(xP, fsP);

% xG = sum( guitar(:,1).*exp(-guitar(:,2)*tG) .* sin(2*pi*[1:10]'*fG*tG) );
% sound(xG, fsG);


% ===============================================================
% part two, spring from four seasons, master Vivaldi

g(0,0.5); g(1/3,0.5); g(1/3,0.5); g(1/3,0.5); g(1/6,0.25); g(0,0.25);
g(7/12,1.5); g(7/12,0.25); g(5/12,0.25);
g(1/3,0.5); g(1/3,0.5); g(1/3,0.5); g(1/6,0.25); g(0,0.25);
g(7/12,1.5); g(7/12,0.25); g(5/12,0.25);
g(4/12,0.5); g(5/12,0.25); g(7/12,0.25); g(5/12,0.5); g(4/12,0.5);
g(1/6,0.5); g(-1/12,0.5); g(-5/12,1);



function p(ex, d)
    fP = 440;
    fsP = 44100; nP = d*fsP; tP = (0:nP-1)/fsP;
    nP = d*fsP; tP = (0:nP-1)/fsP;
    piano =[0.35578, 0.05081e-03;
        0.06525, 0.06723e-03;
        0.02664, 0.10755e-03;
        0.00870, 0.08566e-03;
        0.04392, 0.06843e-03;
        0.03026, 0.06489e-03;
        0.00420, 0.07020e-03;
        0.00226, 0.01801e-03;
        0.00200, 0.04481e-03;
        0.00473, 0.04356e-03];
piano(:,2) = piano(:,2)*20000;
    note = sum( piano(:,1).*exp(-piano(:,2)*tP) .* sin(2*pi*[1:10]'*2^ex*fP*tP) );
    sound(note, fsP);
    pause(d);
end

function g(ex, d)
    fG = 440;
    fsG = 22050; nG = d*fsG; tG = (0:nG-1)/fsG;
    nG = d*fsG; tG = (0:nG-1)/fsG;
    guitar =[0.14836, 0.03109e-03;
         0.51531, 0.29010e-03;
         0.07154, 0.02759e-03;
         0.00928, 0.02834e-03;
         0.00101, 0.01352e-03;
         0.00219, 0.10835e-03;
         0.01291, 0.22861e-03;
         0.01744, 0.19850e-03;
         0.00795, 0.20998e-03;
         0.00572, 0.21626e-03;];
    guitar(:,2) = guitar(:,2)*20000;
    note = sum( guitar(:,1).*exp(-guitar(:,2)*tG) .* sin(2*pi*[1:10]'*2^ex*fG*tG) );
    sound(note, fsG);
    pause(d);
end
